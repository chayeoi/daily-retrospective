# 2018년 10월 27일

## 학교 대시보드 프로젝트

관리자로 등록되지 않은 사용자가 특정 학교의 대시보드 페이지에 접근 시, 관리자 권한을 신청할 수 있도록 하는 로직을 추가하고 있다. 이에 따라 사용자가 접근 시에 판단해야 할 조건도 늘어났다.

1. 인증된 사용자가 아닐 경우 사용자를 OAuth 인증 페이지로 리다이렉트시킨다. (`isAuthenticated`)
2. 사용자의 역할(`role`)이 선생님(`teacher`)이 아닐 경우, 접근을 막는다.
3. 관리자 신청 상태 여부(`status`)를 확인한다.
  1. `approved`일 경우, 대시보드를 정상적으로 접속할 수 있다.
  2. `under_review`일 경우, 승인 대기 중 메세지를 출력한다.
  3. `rejected`일 경우, 거절 사유와 함께 재신청 다이얼로그를 띄운다.

이 부분에 대한 처리 로직을 직접 구현하는 게 상당히 어려웠다. `if` statement를 여러 번 사용해서 어째 구현해놓긴 했는데.. 가독성이 진짜 최악이다. 좀 더 고민해서 이쁘게 짜고 싶은데.. 시간이 촉박해서 대충 짜고 넘어가야하는 지금 이 상황이 너무 싫다!!

