# 2019년 9월 3일

## 전자서명 기능 구현

전자서명은 사실 클래스팅 스쿨 v1에도 있는 기능이었는데, [그 당시에 사용했던 라이브러리](https://github.com/szimek/signature_pad)가 마음에 들지 않았다. 마지막 업데이트가 10개월 전일만큼 유지 보수가 잘 이뤄지지 않고 있기도 하고, 사용자가 서명을 그렸을 때 매끄럽지 않은 듯한 느낌을 주었기 때문이다. 결국 v2에서는 다른 라이브러리를 사용하든지, 아니면 전자서명 기능을 하나부터 열까지 직접 구현하던지 하기로 했다.

그런데 괜찮아보이면서 스타 갯수가 많은 라이브러리가 마땅히 보이지 않아서 처음엔 직접 구현하려 했다. v1에서 이 기능을 구현하면서 HTML Canvas에 대해 어느 정도 공부해본 덕에 그리 어렵지 않을거라 판단했기 때문이다. 실제로 서명을 그리는 일은 어렵지 않았지만, 다음 요구사항들을 구현하는 데서 어려움이 있었다.

1. `resize` 이벤트가 발생하더라도 원래 그려놓았던 서명에 아무런 문제가 발생하지 않아야 한다.
2. 곡선이 매끄럽게 그려져야 한다.
3. 포인터 입력 타입(마우스 입력 또는 터치 입력)에 상관없이 모두 잘 동작해야 한다.

이런 부분까지 모두 신경쓰면서 개발 일정을 맞추기엔 무리가 있다고 판단했다. 결국 어느 정도 잘 만들어진 라이브러리를 fork뜬 다음에 필요한 기능들을 추가하기로 했고, [react-canvas-draw](https://github.com/embiem/react-canvas-draw)가 위 세 가지 요구사항을 잘 만족하고 있었으므로 여기에 몇 가지 기능들을 직접 덧붙이기로 했다.

제일 먼저 추가한 기능은 canvas 위에 그려진 서명이 있는지 여부를 확인할 수 있도록 하는 기능이었다. 만약 canvas 요소에 대하여 `mousedown` 또는 `touchstart` 이벤트가 발생했다면 사용자가 입력을 시도한 것으로 볼 수 있으므로, 이 시점에 실행될 콜백 함수를 'onDrawingStart` prop으로 전달받을 수 있도록 변경했다.

아직 서명 기능 개발이 완전히 끝난 건 아니라서 지금까지 개별적으로 덧붙인 기능은 이게 전부다. 앞으로 또 필요한 기능이 있으면 추가적으로 덧붙여나갈 예정이다.
