# 2019년 9월 29일

## 핸드폰 번호 입력값 포맷팅

사용자가 핸드폰 번호 필드에 '-' 문자를 제외하고 '01012345678'과 같이 숫자만 입력하면 자동으로 '010-1234-5678'과 같이 포맷팅해주는 기능이 필요했다. 세부적인 구현 요구사항은 다음과 같다.

1. 번호 사이에 이음 표시('-')는 입력된 값의 길이에 따라 동적으로 추가된다.
   1. 입력값이 없을 경우 '--'이 아닌 빈 문자열('')로 값이 보여져야 한다.
   2. 입력값이 세 자리 미만일 경우 '01--'이 아닌 '01'으로 보여져야 한다.
   3. 입력값이 세자리 이상 7자리 미만일 경우 '010-123-'이 아닌 '010-123'으로 보여져야 한다.
   4. 입력값이 7자리 이상일 경우 '010-1234-5678'으로 보여져야 한다.
   5. 입력값이 '010-1234-'인 상태에서 백스페이스 키를 눌렀을 경우, 사용자에게 보이는 입력값은 '010-123'으로 변경되어야 한다.
2. 모바일 브라우저에서 포커스 발생 시 큰 숫자형 키패드가 나타나야 한다.

기존에는 포맷팅 기능이 필요하지 않았기 때문에 `number` 타입으로 지정하여 2번 요구사항을 충족시킬 수 있었다. 그러나 포맷팅 기능이 추가됨에 따라 `number` 타입은 더 이상 사용할 수 없게 됐다. `number` 타입의 입력 필드에는 숫자 이외의 문자를 값에 포함할 수 없기 때문이다! (Chrome 브라우저에서 `number` 타입 입력 필드에 '-'를 포함시키더라도 값이 잘 들어가는 것처럼 보이는데, 이는 사용자 눈에만 그렇게 보이는 것일 뿐 내부적으로는 빈 문자열 값이 할당된다.)

하는 수 없이 `text` 타입을 사용하는 방법밖에 없어보였다. 이렇게 할 경우에 문제는 역시 모바일 브라우저 환경에서 큰 숫자형 키패드를 바로 보여줄 수 없다는 것이었고, 이 문제를 해결하기 위한 방법을 찾아보았다. 두 가지 방식을 찾을 수 있었는데 첫 번째는 `pattern` 속성 값을 `[0-9]*` 또는 `\d*`를 설정하는 방법, 두 번째는 `inputmode` 속성을 `numeric`으로 설정하는 방법이었다. `inputmode` 속성은 오래된 브라우저에서는 지원되지 않기 때문에 `inputmode`와 `pattern` 속성을 모두 사용하는 게 가장 좋은 방법이라고 한다.

그런데 좀 더 생각해봤더니, `input` 태그에는 `tel` 타입을 지정할 수도 있다! "왜 이 생각을 못 했을까?"하면서 `tel` 타입을 적용해보았더니 2번 요구사항도 잘 만족하는 동시에 숫자 이외의 값도 입력할 수 있다! 비록 뻘짓을 하긴 했지만, 모바일 브라우저에서 큰 숫자형 키패드가 보이게 하는 새로운 방법을 알게 되었으니 좋은 공부가 되었다고 생각한다. `inputmode` 또는 `pattern` 속성을 활용하는 방법은 카드 번호 또는 우편 번호 입력 필드를 사용할 경우에 유용하게 사용할 수 있을 것 같다.

## 오늘 읽은 글

* [Finger-friendly numerical inputs with `inputmode` | Ollie Williams, CSS Tricks](https://css-tricks.com/finger-friendly-numerical-inputs-with-inputmode/)
